# ======================================================
# Project Configuration
# Deep Learning-Based Object Detection - Indore District
# ======================================================

# Project Information
project:
  name: "DL Object Detection - Indore"
  study_area: "Indore District, Madhya Pradesh, India"
  objective: "Detect buildings, roads, water bodies from satellite imagery"
  
# Paths
paths:
  data_dir: "data"
  raw_data: "data/raw"
  aoi_dir: "data/aoi"
  training_dir: "data/training"
  validation_dir: "data/validation"
  output_dir: "data/outputs"
  models_dir: "models/saved_models"
  
# Google Earth Engine Parameters
gee:
  satellite: "COPERNICUS/S2_SR"  # Sentinel-2 Surface Reflectance
  date_start: "2023-01-01"
  date_end: "2023-12-31"
  cloud_threshold: 10  # Maximum cloud percentage
  bands:
    - "B2"  # Blue
    - "B3"  # Green
    - "B4"  # Red
    - "B8"  # NIR
  resolution: 10  # meters
  
# Object Classes
classes:
  - id: 0
    name: "background"
    color: [0, 0, 0]
  - id: 1
    name: "buildings"
    color: [255, 0, 0]
  - id: 2
    name: "roads"
    color: [0, 0, 255]
  - id: 3
    name: "water"
    color: [0, 255, 255]
  - id: 4
    name: "vegetation"
    color: [0, 255, 0]

# Image Processing
image:
  patch_size: 256  # pixels
  overlap: 32  # overlap between patches
  input_channels: 8  # RGB + NIR + NDVI + NDWI + 2 texture bands
  normalize: true
  normalization_method: "percentile"  # or "minmax", "standard"
  percentile_range: [2, 98]
  
# Data Augmentation
augmentation:
  enabled: true
  rotation: true
  flip_horizontal: true
  flip_vertical: true
  brightness_range: [0.8, 1.2]
  contrast_range: [0.8, 1.2]
  gaussian_noise: 0.01
  
# Model Architecture
model:
  architecture: "unet"  # U-Net for semantic segmentation
  encoder: "resnet34"  # Encoder backbone (resnet34, efficientnetb0, etc.)
  encoder_weights: "imagenet"  # Pre-trained weights
  input_shape: [256, 256, 8]
  n_classes: 5  # background + 4 object classes
  activation: "softmax"  # softmax for multi-class, sigmoid for binary
  
# Training Parameters
training:
  batch_size: 8
  epochs: 100
  learning_rate: 0.0001
  optimizer: "adam"
  loss_function: "categorical_crossentropy"  # or "dice_loss", "focal_loss"
  metrics:
    - "accuracy"
    - "iou_score"
    - "f1_score"
  validation_split: 0.2
  early_stopping:
    enabled: true
    patience: 15
    monitor: "val_loss"
  reduce_lr:
    enabled: true
    patience: 5
    factor: 0.5
    min_lr: 0.000001
  model_checkpoint:
    enabled: true
    monitor: "val_iou_score"
    mode: "max"
    save_best_only: true
    
# Inference
inference:
  batch_size: 4
  use_tta: false  # Test-Time Augmentation
  threshold: 0.5  # Confidence threshold
  
# Post-processing
postprocessing:
  morphology:
    enabled: true
    operation: "closing"  # opening, closing, both
    kernel_size: 5
  min_area: 100  # minimum object area in pixels
  simplify_tolerance: 2.0  # Douglas-Peucker simplification
  fill_holes: true
  smooth_boundaries: true
  
# Validation
validation:
  metrics:
    - "iou"
    - "precision"
    - "recall"
    - "f1_score"
  confusion_matrix: true
  per_class_metrics: true
